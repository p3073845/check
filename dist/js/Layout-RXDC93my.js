import{b as k,r as d,u as N,j as e,L as y,q as S,t as E,v as O,a as L,w as M,O as D,x as A,z as C}from"../assets/index-D00JKfnI.js";import{l as w}from"./logo-zBvOr9X5.js";const $=()=>{var m,p,v;const{loading:t}=k(i=>i.auth),a=JSON.parse(localStorage.getItem("user")),[u,r]=d.useState(!1),l=d.useRef(null),h=N();d.useEffect(()=>{const i=s=>{l.current&&!l.current.contains(s.target)&&r(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[]);const j=()=>{r(!u)},x=()=>{h(E())},g=()=>{const i=window.innerWidth;i<=768?document.body.classList.toggle("sidebar-enable"):i>768&&i<1024?document.body.classList.toggle("enlarged"):document.body.classList.contains("enlarged")?(document.body.classList.remove("enlarged"),document.body.classList.add("sidebar-enable")):(document.body.classList.add("enlarged"),document.body.classList.remove("sidebar-enable"))},b=()=>{S("/change-password")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"navbar-custom",children:[e.jsx("ul",{className:"list-unstyled topnav-menu float-right mb-0 mt-3 ",children:e.jsx("li",{className:"dropdown notification-list",children:e.jsxs("div",{className:"dropdown",ref:l,children:[e.jsxs("button",{className:"nav-user dropdown-toggle",type:"button",onClick:j,style:{color:"#adb5bd",background:"none",border:"none"},children:[e.jsx("span",{className:"user-avatar",children:((p=(m=a==null?void 0:a.token)==null?void 0:m.name)==null?void 0:p.charAt(0))||"U"}),e.jsx("span",{className:"d-none d-sm-inline-block ml-1 font-weight-medium",children:((v=a==null?void 0:a.token)==null?void 0:v.name)||"username"})]}),e.jsxs("div",{className:`dropdown-menu dropdown-menu-right mt-2 ${u?"show":""}`,children:[e.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:b,children:[e.jsx("span",{className:"pr-2",children:e.jsx("i",{className:"ion ion-ios-lock"})}),e.jsx("span",{children:"Change Password"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("a",{className:"dropdown-item",href:"#",onClick:i=>{i.preventDefault(),t||x()},children:[e.jsx("span",{className:"pr-2",children:e.jsx("i",{className:"mdi mdi-power"})}),e.jsx("span",{children:t?"Logging out...":"Logout"})]})]})]})})}),e.jsx("div",{className:"logo-box",children:e.jsxs(y,{to:"/",className:"logo text-center",children:[e.jsx("span",{className:"logo-lg",children:e.jsx("img",{src:w,alt:"logo",width:150,height:40,style:{objectFit:"contain"}})}),e.jsx("span",{className:"logo-sm",children:e.jsx("img",{src:w,alt:"logo",height:30,width:30})})]})}),e.jsx("ul",{className:"list-unstyled topnav-menu topnav-menu-left m-0",children:e.jsx("li",{children:e.jsx("button",{className:"button-menu-mobile waves-effect waves-light",onClick:g,"aria-label":"Toggle navigation menu",children:e.jsx("i",{className:"mdi mdi-menu"})})})})]})})},F=()=>{const t=O(),a=L(),{isOpen:u,isMobile:r}=k(s=>s.sidebar),l=N(),h=d.useMemo(()=>{var c;return(((c=(JSON.parse(localStorage.getItem("user"))||{}).token)==null?void 0:c.menu_data)||[]).sort((o,f)=>o.position-f.position)},[]);console.log("side_menu",h);const[j,x]=d.useState({});d.useEffect(()=>{const s={};h.forEach(n=>{n.children&&n.children.some(o=>`/${o.link}`===t.pathname)&&(s[n.id]=!0)}),x(s)},[t.pathname]);const g=(s,n)=>{s.preventDefault(),r&&(l(M()),document.body.classList.remove("sidebar-enable")),a(`/${n}`)},b=(s,n)=>{s.preventDefault(),x(c=>({...c,[n]:!c[n]}))},m=s=>t.pathname===`/${s}`,p=s=>s&&s.some(n=>m(n.link)),v=s=>e.jsx("li",{className:m(s.link)?"mm-active":"",children:e.jsxs("a",{href:`/${s.link}`,className:m(s.link)?"active":"",onClick:n=>g(n,s.link),children:[e.jsx("i",{className:s.icon}),e.jsxs("span",{children:[" ",s.name," "]})]})},s.id),i=s=>{const n=j[s.id],c=p(s.children);return e.jsxs("li",{className:c||n?"mm-active":"",children:[e.jsxs("a",{href:"#",onClick:o=>b(o,s.id),className:`waves-effect d-flex justify-content-between align-items-center ${c||n?"active":""}`,children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:s.icon}),e.jsx("span",{children:s.name})]}),e.jsx("span",{className:"arrow-icon mt-1",children:e.jsx("i",{className:`mdi mdi-chevron-${n?"down":"right"}`})})]}),e.jsx("ul",{className:`nav-second-level nav ${n?"mm-show":"mm-collapse"}`,children:s.children.map(o=>e.jsx("li",{className:m(o.link)?"mm-active":"",children:e.jsx("a",{href:`/${o.link}`,className:m(o.link)?"active":"",onClick:f=>g(f,o.link),children:o.name})},o.id))})]},s.id)};return e.jsx("div",{className:"left-side-menu",children:e.jsx("div",{className:"slimscroll-menu",children:e.jsx("div",{id:"sidebar-menu",children:e.jsx("ul",{className:"metismenu",id:"side-menu",children:h.map(s=>s.children?i(s):v(s))})})})})},z=()=>e.jsx("div",{children:e.jsx("footer",{className:"footer",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:["2025 Â© 2FA theme by ",e.jsx("a",{href:"#",children:"2FA"})]})})})})}),T=()=>{const t=localStorage.getItem("token"),a=L(),u=N();return d.useEffect(()=>{C(a)},[a]),d.useEffect(()=>{t||a("/login")},[t,a]),d.useEffect(()=>{const r=()=>{const l=window.innerWidth;u(A(l<1024)),document.body.classList.remove("sidebar-enable","enlarged"),l<768?(document.body.classList.remove("enlarged"),document.body.classList.remove("sidebar-enable")):l>767&&l<1024?document.body.classList.add("enlarged"):document.body.classList.add("sidebar-enable")};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[u]),t?e.jsxs("div",{id:"wrapper",children:[e.jsx($,{}),e.jsx(F,{}),e.jsxs("div",{className:"content-page",children:[e.jsx("div",{className:"content",children:e.jsx("div",{className:"container-fluid",style:{minHeight:"calc(100vh - 140px)"},children:e.jsx(D,{})})}),e.jsx(z,{})]})]}):null};export{T as default};
